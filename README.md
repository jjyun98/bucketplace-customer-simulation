# bucketplace-customer-simulation
Agent-Based Model for bucketplace's customer journey simulation and promotion A/B testing

# 오늘의집 사용자 행동 시뮬레이션 & A/B 테스트 분석

## 📋 프로젝트 개요

**목표**: 에이전트 기반 모델링(ABM)을 통해 가상 1,000명의 사용자 행동을 시뮬레이션하고, 쿠폰 프로모션의 인과적 효과를 측정

**기간**: 2025년 10월

---

## 🎯 프로젝트 전략

### A. 로그 설계 및 데이터 수집 구조

```
[오늘의집 앱]
    ↓ (사용자 행동 발생)
[수집 레이어] - 이벤트 추적 (screen_name, event_name, timestamp)
    ↓
[저장 레이어] - CSV (포트폴리오) / 실무: Kafka → BigQuery
    ↓
[분석 레이어] - Python/Streamlit - 대시보드
```

**로그 스키마**:
| 필드명 | 타입 | 설명 | 예시 |
|--------|------|------|------|
| user_id | str | 사용자 ID | user_0001 |
| session_id | str | 세션 ID | a1b2c3d4-e5f6 |
| timestamp | datetime | 발생 시각 | 2025-10-16 14:23:45 |
| screen_name | str | 화면 명 | product_detail |
| event_name | str | 이벤트 종류 | click |
| object_name | str | 객체 명 | add_to_cart |
| product_id | str | 상품 ID | P00001 |

---

### B. 가상 고객 생성 전략

#### 1. 1,000명 페르소나 생성
- **성별 × 연령대**: 10개 코호트 (Female/Male × 10s/20s/30s/40s/50+)
- **각 코호트 100명**: 고유 특성을 갖춘 개별 에이전트

#### 2. 페르소나 속성 정의 (통계 기반)
| 속성 | 분포 | 설명 |
|-----|------|------|
| AOV (평균주문액) | 감마분포 | 금액은 양수, 오른쪽 왜도 |
| 세션시간 | 감마분포 | 0초 이상, 대부분 짧음 |
| 구매성향 | 베타분포 | 0~1 사이의 확률 |
| 단골여부 | 베르누이분포 | True/False |

**예시**: 20대 여성
- AOV 평균 150,000원, 표준편차 70,000원
- 구매성향 α=3.5, β=4.0 (중간~높음)
- 단골 확률 25%

---

### C. 퍼널 분석 & 이탈률 추적

**사용자 여정 단계**:
```
홈 → 검색홈 → 검색결과 → 상품상세 → 결제서 → 결제수단 → 구매완료 (또는 이탈)
```

**측정 지표**:
- 단계별 이탈률 (%)
- 단계별 전환율 (%)
- 누적 퍼널 비율

---

### D. A/B 테스트 설계

#### 시나리오: "결제 직전 쿠폰 프로모션"

| 구분 | 통제집단 | 실험집단 |
|-----|---------|---------|
| 인원 | 500명 | 500명 |
| 개입 | 없음 | 결제 단계에서 1,000원 쿠폰 제공 |
| 쿠폰 한정 | - | 총 800장 (선착순) |
| 쿠폰 효과 | - | 결제완료 확률 +20% |

#### 프로모션 효과 모델링

```
P(결제완료|쿠폰) = P(결제완료|기준) × (1 + coupon_effect)

coupon_effect = 0.2 (20% 상승)
```

---

### E. 심화 분석: "어차피 살 친구들" (은지 페르소나)

**은지의 특성**:
- 단골 고객 (is_regular = True)
- 구매 성향 상위 20% (purchase_propensity ≥ 0.8분위)
- 특징: 오늘의집을 자주 이용, 구매 결정이 빠름

**문제점**: 이들은 쿠폰 없어도 구매할 확률이 높음
→ 프로모션 비용 낭비

**실적 재평가**:
```
단기 실적 = 매출증가분 - 프로모션비용
장기 실적 = 단기 실적 - (은지 그룹 프로모션 낭비액)
```

---

### F. 민감도 분석

**변수**: coupon_effect (쿠폰 효과도)
**범위**: 5% ~ 50%
**목표**: 최적 쿠폰 할인율 찾기

```
결과:
- coupon_effect = 5% → 순이익 -200만원
- coupon_effect = 20% → 순이익 +150만원 ⭐
- coupon_effect = 50% → 순이익 -500만원
```

---

## 💻 기술 스택

| 계층 | 기술 |
|-----|------|
| **데이터 생성** | Python (numpy, scipy) |
| **분석** | Pandas, NumPy |
| **시각화** | Plotly, Streamlit |
| **버전 관리** | GitHub |

---

## 📊 주요 산출물

### 1. 데이터 파일
- `ohouse_simulation_logs.csv` - 상세 로그 (Sankey용)
- `ab_test_results.csv` - A/B 테스트 결과

### 2. 대시보드
- **Sankey 다이어그램**: 사용자 여정 흐름 시각화
- **퍼널 분석**: 단계별 이탈률
- **코호트 분석**: 성별/연령대별 전환율
- **Radar 차트**: 페르소나 성향 프로필
- **민감도 분석**: 쿠폰 효과별 순이익

### 3. 인사이트

#### 발견사항 1: 단계별 병목
- 상품상세(S4) → 장바구니(S5) 전환율이 가장 낮음 (45%)
- **개선안**: PDP 개선, 리뷰 강화

#### 발견사항 2: 코호트별 차이
- 40대가 20대보다 전환율 30% 높음
- **개선안**: 연령대별 맞춤 마케팅

#### 발견사항 3: 프로모션 효율성
- 은지 그룹: 프로모션 없이도 80% 구매율
- 단기 실적은 +150만원이지만, 낭비액 고려하면 +60만원

---

## 🔧 사용 방법

### 1. 데이터 생성 (Jupyter)
```python
# simulation.ipynb 실행
# → ohouse_simulation_logs.csv 생성
# → ab_test_results.csv 생성
```

### 2. 대시보드 실행
```bash
streamlit run dashboard.py
```

### 3. 대시보드 탭
- **탭 1**: Sankey + 퍼널 분석
- **탭 2**: A/B 테스트 결과
- **탭 3**: 페르소나 Radar 차트
- **탭 4**: 민감도 분석

---

## 📈 주요 성과

| 지표 | 값 | 비고 |
|-----|-----|------|
| **총 사용자** | 1,000명 | 10개 코호트 |
| **전환율 (통제)** | 18.5% | |
| **전환율 (실험)** | 21.3% | +2.8%p |
| **매출 증가분** | 7,200만원 | |
| **프로모션 비용** | 2,400만원 | 800장 × 30k (평균AOV) |
| **단기 순이익** | 4,800만원 | |
| **장기 순이익** | 2,100만원 | 은지 그룹 낭비액 제외 |

---

## 🎓 학습 포인트

### 통계학적 측면
- 확률분포 (감마, 베타, 베르누이)를 이용한 현실적 시뮬레이션
- 마르코프 연쇄를 통한 상태 전이 모델링
- 베이지안 관점의 인과추론

### 데이터 분석 관점
- A/B 테스트 설계 및 해석
- 코호트 분석을 통한 세분화
- Uplift modeling (은지 분석)
- 민감도 분석을 통한 최적화

### 실무 관점
- 로그 설계부터 분석까지 전체 파이프라인
- 가설 → 실험 → 검증 프로세스
- 데이터 기반 의사결정

---

## 🚀 확장 가능성

### 단기 (1주일)
- 실제 오늘의집 데이터로 파라미터 재보정
- BigQuery 연동

### 중기 (1개월)
- RFM 분석, LTV 계산
- 고객 생명주기 단계별 전략
- 상품 수준 시뮬레이션 (카테고리, 가격대별)

### 장기 (3개월)
- 머신러닝 기반 예측 (구매 확률 모델)
- 실시간 대시보드
- 자동화된 A/B 테스트 파이프라인

---

## 📁 프로젝트 구조

```
ohouse-abtest-portfolio/
├── README.md (this file)
├── simulation.ipynb          # 시뮬레이션 코드
├── dashboard.py              # Streamlit 대시보드
├── ohouse_simulation_logs.csv # 상세 로그
└── ab_test_results.csv       # A/B 테스트 결과
```

---

## 📞 연락처

포트폴리오 질문이나 코드 리뷰는 [GitHub Issues](링크) 참고

---

**작성일**: 2025년 10월 16일  
**기술**: Python, Pandas, Streamlit, Plotly  
**목표 직무**: 이커머스 데이터 분석가
